{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\napi.interceptors.response.use(response => response, error => {\n  var _error$response;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    localStorage.removeItem('token');\n    window.location.href = '/login';\n  }\n  return Promise.reject(error);\n});\nexport const authAPI = {\n  register: userData => api.post('/auth/register', userData),\n  login: credentials => api.post('/auth/login', credentials),\n  getProfile: () => api.get('/auth/profile'),\n  logout: () => api.post('/auth/logout')\n};\nexport const accountAPI = {\n  getAccounts: () => api.get('/accounts'),\n  getAccount: accountNumber => api.get(`/accounts/${accountNumber}`),\n  createAccount: accountData => api.post('/accounts', accountData),\n  deposit: (accountNumber, depositData) => api.post(`/accounts/${accountNumber}/deposit`, depositData),\n  withdraw: (accountNumber, withdrawalData) => api.post(`/accounts/${accountNumber}/withdraw`, withdrawalData)\n};\nexport const transactionAPI = {\n  getTransactions: params => api.get('/transactions', {\n    params\n  }),\n  getAccountTransactions: (accountNumber, params) => api.get(`/transactions/account/${accountNumber}`, {\n    params\n  }),\n  getTransaction: transactionId => api.get(`/transactions/${transactionId}`),\n  transfer: transferData => api.post('/transactions/transfer', transferData)\n};\nexport const userAPI = {\n  updateProfile: profileData => api.put('/users/profile', profileData),\n  getSummary: () => api.get('/users/summary')\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","error","_error$response","status","removeItem","window","location","href","Promise","reject","authAPI","register","userData","post","login","credentials","getProfile","get","logout","accountAPI","getAccounts","getAccount","accountNumber","createAccount","accountData","deposit","depositData","withdraw","withdrawalData","transactionAPI","getTransactions","params","getAccountTransactions","getTransaction","transactionId","transfer","transferData","userAPI","updateProfile","profileData","put","getSummary"],"sources":["C:/Users/ELDRED/Desktop/bank system/frontend/src/services/api.ts"],"sourcesContent":["import axios from 'axios';\r\nimport { AuthResponse, User, Account, Transaction, UserSummary, TransferRequest, DepositRequest, WithdrawalRequest, CreateAccountRequest, PaginatedResponse } from '../types';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';\r\n\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem('token');\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      localStorage.removeItem('token');\r\n      window.location.href = '/login';\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport const authAPI = {\r\n  register: (userData: any) => api.post<AuthResponse>('/auth/register', userData),\r\n  login: (credentials: { email: string; password: string }) => \r\n    api.post<AuthResponse>('/auth/login', credentials),\r\n  getProfile: () => api.get<{ user: User }>('/auth/profile'),\r\n  logout: () => api.post('/auth/logout'),\r\n};\r\n\r\nexport const accountAPI = {\r\n  getAccounts: () => api.get<{ accounts: Account[] }>('/accounts'),\r\n  getAccount: (accountNumber: string) => \r\n    api.get<{ account: Account }>(`/accounts/${accountNumber}`),\r\n  createAccount: (accountData: CreateAccountRequest) => \r\n    api.post<{ account: Account }>('/accounts', accountData),\r\n  deposit: (accountNumber: string, depositData: DepositRequest) => \r\n    api.post(`/accounts/${accountNumber}/deposit`, depositData),\r\n  withdraw: (accountNumber: string, withdrawalData: WithdrawalRequest) => \r\n    api.post(`/accounts/${accountNumber}/withdraw`, withdrawalData),\r\n};\r\n\r\nexport const transactionAPI = {\r\n  getTransactions: (params?: { page?: number; limit?: number; type?: string; status?: string; category?: string }) =>\r\n    api.get<PaginatedResponse<Transaction>>('/transactions', { params }),\r\n  getAccountTransactions: (accountNumber: string, params?: { page?: number; limit?: number }) =>\r\n    api.get<PaginatedResponse<Transaction>>(`/transactions/account/${accountNumber}`, { params }),\r\n  getTransaction: (transactionId: string) => \r\n    api.get<{ transaction: Transaction }>(`/transactions/${transactionId}`),\r\n  transfer: (transferData: TransferRequest) => \r\n    api.post<{ transaction: Transaction; fromAccount: Account; toAccount: Account }>('/transactions/transfer', transferData),\r\n};\r\n\r\nexport const userAPI = {\r\n  updateProfile: (profileData: Partial<User>) => \r\n    api.put<{ user: User }>('/users/profile', profileData),\r\n  getSummary: () => api.get<UserSummary>('/users/summary'),\r\n};\r\n\r\nexport default api;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}